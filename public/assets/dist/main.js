angular.module("app").controller("editorCtrl",["$scope","$routeParams","getDataServices","postDataServices","$location",function(t,e,a,o,n){t.data={},e.id?(a.getOneData(e.id).then(function(e){t.data.name=e.data.name,t.data.title=e.data.title,t.data.address=e.data.address,t.data.phone=e.data.phone,t.data.address=e.data.address,t.data.description=e.data.description,t.data.qq=e.data.qq,t.data.email=e.data.email}).catch(function(t){console.log(t)}),t.doSave=function(){o.updateData(e.id,t.data).then(function(t){"y"==t.status?n.path("/"):alert(t.msg)})}):t.doSave=function(){o.addData(t.data).then(function(t){"y"==t.status?n.path("/"):alert(t.msg)})}}]),angular.module("app").controller("indexCtrl",["$scope","getDataServices","postDataServices","$location",function(t,e,a,o){e.getData().then(function(e){t.data=e.data}).catch(function(t){console.log(t)}),t.doDelete=function(t){confirm("确认删除?")&&a.deleteData(t).then(function(t){"y"==t.status?window.location.href="/":alert(t.msg)}).catch(function(t){console.log(t)})}}]),angular.module("app").controller("showCtrl",["$scope","getDataServices","$routeParams",function(t,e,a){e.getOneData(a.id).then(function(e){t.data=e.data}).catch(function(t){console.log(t)})}]),angular.module("app").factory("getDataServices",["$http","$q",function(t,e){var a={};return a.getData=function(){var a="/card",o=e.defer();return t({method:"get",url:a}).success(function(t){o.resolve(t)}).error(function(t,e){console.log(t),console.log(e),o.reject(t)}),o.promise},a.getOneData=function(a){var o="/card/"+a,n=e.defer();return t({method:"get",url:o}).success(function(t){n.resolve(t)}).error(function(t,e){console.log(t),console.log(e),n.reject(t)}),n.promise},a}]),angular.module("app").factory("postDataServices",["$http","$q",function(t,e){var a={};return a.addData=function(a){var o=e.defer();return t({method:"post",url:"/card",data:a}).success(function(t){o.resolve(t)}).error(function(t,e){console.log(t),console.log(e),o.reject(t)}),o.promise},a.updateData=function(a,o){var n=e.defer();return t({method:"put",url:"/card/"+a,data:o}).success(function(t){n.resolve(t)}).error(function(t,e){console.log(t),console.log(e),n.reject(t)}),n.promise},a.deleteData=function(a){var o=e.defer();return t.delete("/card/"+a).success(function(t){o.resolve(t)}).error(function(t,e){console.log(t),console.log(e),o.reject(t)}),o.promise},a}]);